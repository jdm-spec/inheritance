<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Al-Qismah | Professional Farāʾiḍ Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; overflow-x: hidden; }
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .arabic { font-family: 'Amiri', serif; }
        input, select { font-size: 16px !important; } 
        .button-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: white;
            border-top: 1px solid #e2e8f0;
            z-index: 100;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 pb-32">

    <header class="bg-emerald-900 text-white shadow-xl sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0 flex items-center">
                    <a href="#" class="text-xl md:text-2xl tracking-widest text-emerald-400 font-bold leading-tight">
                        Al-Qismah <span class="text-white font-light text-[10px] md:text-xs block tracking-normal">Islamic Inheritance Portal</span>
                    </a>
                </div>

                <div class="hidden lg:flex items-center space-x-8">
                    <a href="#" class="hover:text-emerald-300 transition text-sm font-medium">Home</a>
                    
                    <div class="relative group">
                        <button class="flex items-center hover:text-emerald-300 transition text-sm font-medium focus:outline-none">
                            Rules
                            <svg class="ml-1 w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="absolute left-1/2 -translate-x-1/2 mt-2 w-[500px] bg-white text-gray-800 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 grid grid-cols-2 p-6 gap-6">
                            <div>
                                <h3 class="text-emerald-700 text-xs uppercase font-bold mb-3">Prescribed Shares</h3>
                                <ul class="space-y-2 text-sm text-gray-600">
                                    <li><a href="#inheritance-laws" class="hover:text-emerald-600 block">Fixed Shares (Furud)</a></li>
                                    <li><a href="#blocking-rules" class="hover:text-emerald-600 block">The 2:1 Ratio Logic</a></li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-emerald-700 text-xs uppercase font-bold mb-3">Logic</h3>
                                <ul class="space-y-2 text-sm text-gray-600">
                                    <li><a href="#blocking-rules" class="hover:text-emerald-600 block">Blocking Rules (Hajib)</a></li>
                                    <li><a href="#blocking-rules" class="hover:text-emerald-600 block">Residuary (Asabah)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <a href="#calculator" class="bg-emerald-500 hover:bg-emerald-400 text-white px-6 py-2 rounded-lg shadow-lg transition text-sm font-bold">Calculate Now</a>
                </div>

                <div class="lg:hidden flex items-center">
                    <button id="mobile-menu-button" class="p-2 rounded-md hover:bg-emerald-800 focus:outline-none transition">
                        <svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div id="mobile-menu" class="hidden lg:hidden bg-emerald-950 border-t border-emerald-800 shadow-inner ">
                <div class="px-4 pt-2 pb-6 space-y-2 text-center ">
                    <a href="#" class="block px-3 py-4 text-base font-medium border-b border-emerald-800">Home</a>
                    <a href="#blocking-rules" class="block px-3 py-4 text-base font-medium border-b border-emerald-800">Blocking Rules</a>
                    <a href="#inheritance-laws" class="block px-3 py-4 text-base font-medium">Inheritance Laws</a>
                </div>
            </div>
        </nav>
    </header>

    <main id="calculator" class="px-4 pt-8 space-y-12 max-w-4xl mx-auto">
        
        <div class="bg-white p-6 rounded-3xl shadow-md border border-slate-100">
            <h2 class="text-sm font-bold text-emerald-800 mb-4 flex items-center">Estate Details</h2>
            <div class="space-y-6">
                <div>
                    <label class="text-xs font-bold text-emerald-600 uppercase tracking-wider">The Deceased is:</label>
                    <div class="flex gap-4 mt-2">
                        <button type="button" onclick="setGender('male')" id="btnMale" class="flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all border-emerald-500 bg-emerald-50 text-emerald-700">
                            <span class="text-sm font-bold">Male</span>
                            <span class="text-[9px] uppercase opacity-60">Husband</span>
                        </button>
                        <button type="button" onclick="setGender('female')" id="btnFemale" class="flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all border-slate-100 bg-slate-50 text-slate-400">
                            <span class="text-sm font-bold">Female</span>
                            <span class="text-[9px] uppercase opacity-60">Wife</span>
                        </button>
                    </div>
                    <input type="hidden" id="deceasedGender" value="male">
                </div>

                <div>
                    <label class="text-xs font-bold text-emerald-600 uppercase tracking-wider">Total Estate Amount</label>
                    <input type="number" id="totalEstate" class="w-full mt-1 p-4 bg-slate-50 rounded-2xl border-2 border-transparent focus:border-emerald-500 outline-none font-bold" placeholder="0.00">
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-3xl shadow-md border border-slate-100">
            <h2 class="text-sm font-bold text-emerald-800 mb-4 flex items-center">Select Heirs</h2>
            <div id="heirGrid" class="space-y-3"></div>
        </div>
<div class="mt-8 bg-white p-6 rounded-3xl shadow-md border border-slate-100">
        <button onclick="calculate()" class="w-full  bg-emerald-600 hover:bg-emerald-700 active:bg-emerald-800 text-white font-black py-4 rounded-2xl shadow-lg transition-all transform active:scale-95 uppercase text-sm tracking-widest">
            Calculate Now
        </button>
    </div>  
        <div id="resultsView" class="hidden space-y-4 pb-12">
            <div class="bg-emerald-700 text-white p-6 rounded-3xl shadow-lg">
                <p class="text-[10px] uppercase font-bold opacity-70">Net Distributable Estate</p>
                <h3 id="netDisplay" class="text-2xl font-black mt-1"></h3>
            </div>
            <div class="bg-white rounded-3xl shadow-md overflow-hidden border border-slate-100">
                <div id="resultCards" class="divide-y divide-slate-100"></div>
            </div>
            <div id="baytAlMal" class="hidden bg-slate-800 text-white p-5 rounded-3xl text-sm italic">
                Notice: Balance transferred to Bayt al-Mal.
            </div>
        </div>

        <hr class="border-slate-200">

        <section id="inheritance-laws" class="py-6">
            <h2 class="text-2xl font-bold text-emerald-900 mb-6">Basic Inheritance Laws</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-emerald-700 mb-2 italic">The 2:1 Ratio</h3>
                    <p class="text-sm text-slate-600 leading-relaxed">In most residuary cases (like sons and daughters), the male receives twice the share of the female. This is balanced by the male's legal obligation to provide for the family's financial needs.</p>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-emerald-700 mb-2 italic">Fixed Shares (Furud)</h3>
                    <p class="text-sm text-slate-600 leading-relaxed">Specific relatives like the Mother, Father, Husband, and Wife have shares explicitly fixed by the Quran (e.g., 1/2, 1/4, 1/8, 1/6).</p>
                </div>
            </div>
        </section>

        <section id="blocking-rules" class="py-6">
            <h2 class="text-2xl font-bold text-emerald-900 mb-6">Blocking Rules (Al-Hajib)</h2>
            <div class="bg-emerald-50 p-6 rounded-3xl border border-emerald-100">
                <p class="text-sm text-emerald-800 mb-4 font-medium italic">Certain closer relatives prevent more distant ones from inheriting:</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm">
                        <thead class="text-emerald-900 border-b border-emerald-200">
                            <tr>
                                <th class="py-2">Potential Heir</th>
                                <th class="py-2">Blocked By</th>
                            </tr>
                        </thead>
                        <tbody class="text-slate-600 divide-y divide-emerald-100">
                            <tr><td class="py-3 font-bold">Grandfather</td><td class="py-3">Father</td></tr>
                            <tr><td class="py-3 font-bold">Grandsons</td><td class="py-3">Son</td></tr>
                            <tr><td class="py-3 font-bold">Brothers/Sisters</td><td class="py-3">Father or Son</td></tr>
                            <tr><td class="py-3 font-bold">Uncles</td><td class="py-3">Grandfather, Father, or Son</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
        </section>

    </main>

    
 <footer class="bg-slate-900 text-slate-400 py-12 px-4 mt-20 border-t border-slate-800">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-3 gap-12 mb-12">
                <div>
                    <h3 class="text-white font-bold text-lg mb-4 tracking-widest uppercase">Al-Qismah</h3>
                    <p class="text-sm leading-relaxed">
                        A dedicated portal for the calculation and education of Islamic Inheritance (Farāʾiḍ). 
                        Designed to bring clarity and precision to estate distribution.
                    </p>
                </div>
                
                <div>
                    <h4 class="text-emerald-400 font-bold text-xs uppercase tracking-widest mb-4">Quick Navigation</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#calculator" class="hover:text-white transition">Calculator</a></li>
                        <li><a href="#blocking-rules" class="hover:text-white transition">Blocking Rules</a></li>
                        <li><a href="#inheritance-laws" class="hover:text-white transition">Inheritance Laws</a></li>
                        <li><a href="#" class="hover:text-white transition">Back to Top</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-emerald-400 font-bold text-xs uppercase tracking-widest mb-4">Legal Notice</h4>
                    <p class="text-[11px] leading-relaxed italic">
                        This calculator is for educational purposes only. While it follows standard Sharia principles, 
                        complex cases should be reviewed by a qualified scholar or legal professional.
                    </p>
                </div>
            </div>

            <div class="border-t border-slate-800  flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-xs uppercase tracking-widest font-medium">
                    &copy; 2026 Al-Qismah Islamic Portal. All Rights Reserved.
                </p>
                <div class="flex space-x-6 grayscale opacity-50 hover:grayscale-0 transition duration-500">
                    <span class="text-[10px] border border-slate-700 px-2 py-1 rounded">FARĀʾIḌ</span>
                    <span class="text-[10px] border border-slate-700 px-2 py-1 rounded">SHARIA COMPLIANT</span>
                </div>
            </div>
        </div>
    </footer>
    <script>
        // MOBILE MENU TOGGLE
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        let selectedGender = 'male';

        function setGender(gender) {
            selectedGender = gender;
            document.getElementById('deceasedGender').value = gender;
            
            const btnMale = document.getElementById('btnMale');
            const btnFemale = document.getElementById('btnFemale');
            
            if (gender === 'male') {
                btnMale.className = "flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all border-emerald-500 bg-emerald-50 text-emerald-700";
                btnFemale.className = "flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all border-slate-100 bg-slate-50 text-slate-400";
            } else {
                btnFemale.className = "flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all border-emerald-500 bg-emerald-50 text-emerald-700";
                btnMale.className = "flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all border-slate-100 bg-slate-50 text-slate-400";
            }
            
            renderHeirs();
        }

        const heirCategories = [
            { id: "spouses", label: "Spouse", sub: "Must be legally married", type: "number" },
            { id: "sons", label: "Sons", sub: "Biological", type: "number" },
            { id: "daughters", label: "Daughters", sub: "Biological", type: "number" },
            { id: "grandsons", label: "Grandsons", sub: "Son's side", type: "number" },
            { id: "granddaughters", label: "Granddaughters", sub: "Son's side", type: "number" },
            { id: "father", label: "Father", sub: "Biological", type: "checkbox" },
            { id: "mother", label: "Mother", sub: "Biological", type: "checkbox" },
            { id: "grandfather", label: "Paternal Grandfather", sub: "Father's father", type: "checkbox" },
            { id: "paternalGrandmother", label: "Paternal Grandmother", sub: "Father's side", type: "checkbox" },
            { id: "maternalGrandmother", label: "Maternal Grandmother", sub: "Mother's side", type: "checkbox" },
            { id: "fullBrothers", label: "Full Brothers", sub: "Same parents", type: "number" },
            { id: "fullSisters", label: "Full Sisters", sub: "Same parents", type: "number" },
            { id: "paternalBrothers", label: "Paternal Brothers", sub: "Same father", type: "number" },
            { id: "paternalSisters", label: "Paternal Sisters", sub: "Same father", type: "number" },
            { id: "maternalBrothers", label: "Maternal Brothers", sub: "Same mother", type: "number" },
            { id: "maternalSisters", label: "Maternal Sisters", sub: "Same mother", type: "number" },
            { id: "fullNephews", label: "Full Brother's Sons", sub: "", type: "number" },
            { id: "fullUncles", label: "Paternal Full Uncles", sub: "Father's full brother", type: "number" }
        ];

        function renderHeirs() {
            const grid = document.getElementById('heirGrid');
            grid.innerHTML = '';
            
            heirCategories.forEach(h => {
                let displayLabel = h.label;
                if (h.id === 'spouses') {
                    displayLabel = selectedGender === 'male' ? " Wives" : " Husband";
                }

                const div = document.createElement('div');
                div.className = "flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100";
                let input = h.type === 'number' 
                    ? `<input type="number" id="${h.id}" value="0" min="0" class="w-14 h-10 text-center bg-white border rounded-xl font-bold">`
                    : `<input type="checkbox" id="${h.id}" class="w-6 h-6 accent-emerald-600 rounded-lg">`;
                
                div.innerHTML = `<div><p class="text-xs font-bold text-slate-700">${displayLabel}</p><p class="text-[9px] text-slate-400 uppercase">${h.sub}</p></div>${input}`;
                grid.appendChild(div);
            });
        }

        renderHeirs(); // Initial call

        function calculate() {
            const net = parseFloat(document.getElementById('totalEstate').value) || 0;
            if (net <= 0) return alert("Please enter total estate.");

            const h = {};
            heirCategories.forEach(cat => {
                const el = document.getElementById(cat.id);
                h[cat.id] = cat.type === 'checkbox' ? el.checked : parseInt(el.value || 0);
            });

            let results = [];
            const hasDescendants = (h.sons + h.daughters + h.grandsons + h.granddaughters) > 0;

            // 1. Spouses
            if (h.spouses > 0) {
                let share = selectedGender === 'male' ? (hasDescendants ? 1/8 : 1/4) : (hasDescendants ? 1/4 : 1/2);
                results.push({ name: selectedGender === 'male' ? "Wives" : "Husband", f: share });
            }

            // 2. Parents
            if (h.father) results.push({ name: "Father", f: 1/6 });
            if (h.mother) {
                let mShare = (hasDescendants || (h.fullBrothers + h.fullSisters + h.paternalBrothers + h.paternalSisters) > 1) ? 1/6 : 1/3;
                results.push({ name: "Mother", f: mShare });
            }

            // 3. Residue Logic (Simplified Asabah)
            let used = results.reduce((s, r) => s + r.f, 0);
            let residue = 1 - used;

            if (residue > 0) {
                if (h.sons > 0 || h.daughters > 0) {
                    let p = (h.sons * 2) + h.daughters;
                    if (h.sons > 0) results.push({ name: "Sons", f: (residue/p) * 2 * h.sons });
                    if (h.daughters > 0) results.push({ name: "Daughters", f: (residue/p) * h.daughters });
                } else if (h.father) {
                    let fIdx = results.findIndex(r => r.name === "Father");
                    if (fIdx !== -1) results[fIdx].f += residue;
                } else {
                    results.push({ name: "Remaining Relatives/Treasury", f: residue });
                }
            }

            // Display Results
            const resView = document.getElementById('resultsView');
            resView.classList.remove('hidden');
            document.getElementById('netDisplay').innerText = net.toLocaleString();
            const resCards = document.getElementById('resultCards');
            resCards.innerHTML = "";
            
            results.forEach(r => {
                resCards.innerHTML += `<div class="p-5 flex justify-between items-center"><span class="font-bold text-slate-700 text-sm">${r.name}</span><div class="text-right"><p class="text-emerald-700 font-black">${(r.f * net).toLocaleString(undefined, {maximumFractionDigits:0})}</p></div></div>`;
            });
            
            window.scrollTo({ top: resView.offsetTop - 100, behavior: 'smooth' });
        }
    </script>
</body>
</html>
