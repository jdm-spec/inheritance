<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Mīrāth | Professional Farāʾiḍ Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html{
            scroll-behavior: smooth;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #10b981; border-radius: 10px; }
        /* Smooth transition for mobile menu */
        #mobile-menu { transition: max-height 0.3s ease-in-out; overflow: hidden; }
    </style>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

    <div class="flex flex-col min-h-screen">
        <nav class="bg-emerald-900 text-white shadow-2xl sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-20">
                    
                    <div class="flex-shrink-0 flex items-center">
                        <a href="#" class="text-xl md:text-2xl tracking-widest text-emerald-400 font-bold">
                            AL-MĪRĀTH <span class="text-white font-light text-[10px] md:text-xs block tracking-normal">Quranic Inheritance Portal</span>
                        </a>
                    </div>

                    <div class="hidden lg:flex items-center space-x-8">
                        <a href="#" class="hover:text-emerald-300 transition text-sm font-medium">Home</a>
                        
                        <div class="relative group">
                            <button class="flex items-center hover:text-emerald-300 transition text-sm font-medium focus:outline-none">
                                Rules
                                <svg class="ml-1 w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div class="absolute left-1/2 -translate-x-1/2 mt-2 w-[600px] bg-white text-gray-800 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 grid grid-cols-2 p-6 gap-6">
                                <div>
                                    <h3 class="text-emerald-700  text-xs uppercase mb-3">Prescribed Shares</h3>
                                    <ul class="space-y-2 text-sm text-gray-600">
                                        <li><a href="#husband" class="hover:text-emerald-600 block">1. Husband (1/2 or 1/4)</a></li>
                                        <li><a href="#wife" class="hover:text-emerald-600 block">2. Wife (1/4 or 1/8)</a></li>
                                        <li><a href="#daughter" class="hover:text-emerald-600 block">3. Daughter (1/2 or 2/3)</a></li>
                                        <li><a href="#parents" class="hover:text-emerald-600 block">5-6. Father & Mother Shares</a></li>
                                        <li><a href="#grandparents" class="hover:text-emerald-600 block">7-9. Grandparents</a></li>
                                        <li><a href="#tasib" class="hover:text-emerald-600 block">14. Taʿṣīb Ranking Order</a></li>
                                         
                                    </ul>
                                </div>
                                <div>
                                    <h3 class="text-emerald-700  text-xs uppercase mb-3">Logic</h3>
                                    <ul class="space-y-2 text-sm text-gray-600">
                                        <li><a href="#" class="hover:text-emerald-600">Blocking Rules</a></li>
                                        <li><a href="#" class="hover:text-emerald-600">2:1 Ratio</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        
                        <a href="#calculator" class="bg-emerald-500 hover:bg-emerald-400 text-white px-6 py-2 rounded-lg    shadow-lg transition">Calculate Now</a>
                    </div>

                    <div class="lg:hidden flex items-center">
                        <button id="mobile-menu-button" class="p-2 rounded-md hover:bg-emerald-800 focus:outline-none transition">
                            <svg id="menu-icon" class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div id="mobile-menu" class="hidden lg:hidden bg-emerald-950 border-t border-emerald-800 shadow-inner">
                <div class="px-4 pt-2 pb-6 space-y-2">
                    <a href="#" class="block px-3 py-4 text-base font-medium border-b border-emerald-800">Home</a>
                    <div class="py-2">
                        <p class="px-3 text-xs    text-emerald-500 uppercase">Inheritance Rules</p>
                        <div class="grid grid-cols-2 gap-2 mt-2 px-3">
                            <a href="#husband" class="text-sm text-emerald-100 py-1">1. Husband (1/2 or 1/4)</a>
                                <a href="#wife" class="hover:text-emerald-600 block">2. Wife (1/4 or 1/8)</a>
                                <a href="#daughter" class="hover:text-emerald-600 block">3. Daughter (1/2 or 2/3)</a>
                                <a href="#parents" class="hover:text-emerald-600 block">5-6. Father & Mother Shares</a>
                                <a href="#grandparents" class="hover:text-emerald-600 block">7-9. Grandparents</a>
                           
                        </div>
                    </div>

                    <a href="#calculator" class="block w-full text-center bg-emerald-500 text-white py-4 rounded-xl    mt-4">Calculate Now</a>
                </div>
            </div>
        </nav>

        <main class="flex-grow max-w-6xl mx-auto w-full p-4 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-2 space-y-6">
                <section class="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div class="bg-emerald-600 p-4 text-white flex items-center justify-between">
                        <span class="font-bold">1. Estate & Deceased Info</span>
                        </div>
                    <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-xs text-emerald-700 uppercase mb-1">Total Estate Value</label>
                            <input type="number" id="totalEstate" class="w-full border-2 border-gray-100 bg-gray-50 rounded-xl p-4 text-lg    focus:border-emerald-500 focus:bg-white outline-none transition" value="100000">
                        </div>
                        <div>
                            <label class="block text-xs  text-emerald-700 uppercase mb-1">Deceased Gender</label>
                            <select id="gender" class="w-full border-2 border-gray-100 bg-gray-50 rounded-xl p-4 text-lg focus:border-emerald-500 focus:bg-white transition">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                    </div>
                </section>

                <section class="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div class="bg-emerald-600 p-4 text-white  font-bold ">2. Surviving Relatives</div>
                    <div class="p-4 md:p-6 max-h-[50vh] md:h-96 overflow-y-auto custom-scrollbar">
                        <div id="heirInputs" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            </div>
                    </div>
                    <div class="p-6 bg-gray-50 border-t">
                        <button onclick="calculateFullInheritance()" class="w-full bg-emerald-700 hover:bg-emerald-900 text-white py-5 rounded-2xl font-bold text-lg shadow-xl transition active:scale-95 uppercase tracking-widest">
                            Calculate
                        </button>
                    </div>
                </section>
            </div>

            <div class="lg:col-span-1">
                <div id="resultCard" class="bg-white rounded-2xl shadow-2xl sticky top-24 overflow-hidden hidden border-t-8 border-emerald-800">
                    <div class="bg-emerald-800 p-4 text-white    font-bold text-center uppercase tracking-tighter">Resulting Shares</div>
                    <div class="p-6">
                        <div id="distributionList" class="space-y-4"></div>
                        <hr class="my-6">
                        <div class="text-center text-[10px] text-gray-400 italic">Rules applied: Quranic Fixed Shares (Farḍ) and Residue (ʿAsabah).</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- MOBILE MENU LOGIC ---
        const menuBtn = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close menu when clicking links
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
        });

        // --- HEIR SETUP ---
        const heirCategories = [
            { id: "spouses", label: "Husband/Wife", sub: "Must be legally married" },
            { id: "sons", label: "Sons", sub: "Biological only" },
            { id: "daughters", label: "Daughters", sub: "Biological only" },
            { id: "grandsons", label: "Grandsons", sub: "From son's side" },
            { id: "granddaughters", label: "Granddaughters", sub: "From son's side" },
            { id: "father", label: "Father", sub: "Direct biological" },
            { id: "mother", label: "Mother", sub: "Direct biological" },
            { id: "grandfather", label: "Paternal Grandfather", sub: "Father's father" },
            { id: "paternalGrandmother", label: "Paternal Grandmother", sub: "Father's mother" },
            { id: "maternalGrandmother", label: "Maternal Grandmother", sub: "Mother's mother" },
            { id: "fullBrothers", label: "Full Brothers", sub: "Same father & mother" },
            { id: "fullSisters", label: "Full Sisters", sub: "Same father & mother" },
            { id: "paternalBrothers", label: "Paternal Brothers", sub: "Same father" },
            { id: "paternalSisters", label: "Paternal Sisters", sub: "Same father" },
            { id: "maternalBrothers", label: "Maternal Brothers", sub: "Same mother" },
            { id: "maternalSisters", label: "Maternal Sisters", sub: "Same mother" },
            { id: "fullNephews", label: "Full Brother's Sons", sub: "" },
            { id: "fullUncles", label: "Paternal Full Uncles", sub: "Father's full brother" }
            // More can be added following the same pattern
        ];

        const inputContainer = document.getElementById('heirInputs');
        heirCategories.forEach(h => {
            inputContainer.innerHTML += `
                <div class="flex items-center justify-between bg-gray-50 p-3 rounded-xl border border-gray-100">
                    <div>
                        <div class="text-sm    text-gray-800">${h.label}</div>
                        <div class="text-[10px] text-emerald-600    uppercase">${h.sub}</div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="number" id="count_${h.id}" min="0" value="0" class="w-14 h-10 border-2 border-emerald-100 rounded-lg text-center    text-emerald-700 outline-none focus:border-emerald-500">
                    </div>
                </div>
            `;
        });

        // --- CALCULATION LOGIC ---
        function calculateFullInheritance() {
            const estate = parseFloat(document.getElementById('totalEstate').value);
            const gender = document.getElementById('gender').value;
            const sons = parseInt(document.getElementById('count_sons').value) || 0;
            const daughters = parseInt(document.getElementById('count_daughters').value) || 0;
            const hasChildren = (sons > 0 || daughters > 0);

            let results = [];
            let remaining = estate;

            // Spouse Logic
            const spouseCount = parseInt(document.getElementById('count_spouses').value) || 0;
            if (spouseCount > 0) {
                let fraction = (gender === 'male') ? (hasChildren ? 0.125 : 0.25) : (hasChildren ? 0.25 : 0.5);
                const shareTotal = estate * fraction;
                results.push({ label: gender === 'male' ? "Wife/Wives" : "Husband", amount: shareTotal, info: `Fixed (${fraction === 0.125 ? '1/8' : '1/4'})` });
                remaining -= shareTotal;
            }

            // Simple 2:1 Ratio Residue
            if (remaining > 0 && (sons > 0 || daughters > 0)) {
                const totalParts = (sons * 2) + daughters;
                const partValue = remaining / totalParts;
                if (sons > 0) results.push({ label: "Sons", amount: partValue * 2 * sons, info: "Residue 2x" });
                if (daughters > 0) results.push({ label: "Daughters", amount: partValue * daughters, info: "Residue 1x" });
                remaining = 0;
            }

            renderResults(results, remaining);
        }

        function renderResults(res, left) {
            const card = document.getElementById('resultCard');
            const list = document.getElementById('distributionList');
            card.classList.remove('hidden');
            list.innerHTML = "";
            
            res.forEach(r => {
                list.innerHTML += `
                    <div class="flex justify-between items-center bg-emerald-50 p-3 rounded-lg border-l-4 border-emerald-500">
                        <div>
                            <div class="text-xs    text-emerald-900">${r.label}</div>
                            <div class="text-[9px] text-emerald-600 uppercase">${r.info}</div>
                        </div>
                        <div class="text-md font-mono font-black text-emerald-900">₹${r.amount.toLocaleString(undefined, {maximumFractionDigits:0})}</div>
                    </div>
                `;
            });

            if (left > 0) {
                list.innerHTML += `<div class="p-3 bg-amber-50 text-amber-800 text-[10px]    rounded-lg border border-amber-200">Charity/Baitul Maal: ₹${left.toLocaleString()}</div>`;
            }

            // Mobile specific: Scroll to result after calculation
            if(window.innerWidth < 1024) {
                card.scrollIntoView({ behavior: 'smooth' });
            }
        }
    </script>
</body>

</html>

